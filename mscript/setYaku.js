var yakuMap = {
  リーチ: "立直",
  ツモ: "自摸",
  ピンフ: "平和",
  裏ドラ1: "裏1",
  "赤1　": "赤1",
  "": "",
  "三色　": "三色同順",
  ジュンチャン: "純全帯么",
  三色: "三色同順",
  "ピンフ　": "平和",
  "タンヤオ　": "タンヤオ",
  ダブ南: "ダブ南",
  ホンイツ: "混一色（鳴）",
  裏ドラ3: "裏3",
  "中　": "中",
  裏ドラ2: "裏2",
  "赤1　オール": "赤1",
  ダブ東: "ダブ東",
  "ドラ1　オール": "ドラ1",
  "ホンイツ　": "混一色（鳴）",
  "七対子　": "七対子",
  チャンタ: "全帯么",
  "發　オール": "發",
  メンホン: "混一色",
  "裏ドラ1　": "裏1",
  トイトイ: "対々和",
  河底: "河底撈魚",
  "ホンイツ　オール": "混一色（鳴）",
  "發　": "發",
  "ツモ　オール": "自摸",
  オール: "",
  海底: "海底撈月",
  "ピンフ　オール": "平和",
  "裏ドラ1　オール": "裏1",
  "ドラ2　": "ドラ2",
  "白　オール": "白",
  "白　": "白",
  "ドラ1　": "ドラ1",
  裏ドラ4: "裏4",
  タンヤオピンフ: "タンヤオ、平和",
  "ツモ　": "自摸",
  "中　オール": "中",
  "赤2　": "赤2",
  "東　": "東",
  タンヤオドラ1: "タンヤオ、ドラ1",
  リーチツモタンヤオ赤1: "立直、自摸、タンヤオ、赤1",
  "ダブ南　": "ダブ南",
  "裏ドラ1　オール　オール": "裏1",
  赤: "赤1",
  裏ドラ: "裏1",
  "リーチ　　1本場": "立直",
  ダブルリーチ: "ダブル立直",
  "一盃口　": "一盃口",
  ピンフドラ1: "平和、ドラ1",
  "七対子　オール": "七対子",
  タンヤオ赤1: "タンヤオ、赤1",
  "東　オール": "東",
  "一盃口　オール": "一盃口",
  "南　オール": "南",
  "赤2　オール": "赤2",
  "海底　オール": "海底撈月",
  ドラ: "ドラ1",
  "1赤1": "赤1",
  "西　": "西",
  "赤　": "赤1",
  "タンヤオ　オール": "タンヤオ",
  "三暗刻　オール": "三暗刻",
  "リーチツモ　": "立直、自摸",
  "南　": "南",
  "北　": "北",
  リーチピンフ: "立直、平和",
  ツモドラ2: "自摸、ドラ2",
  "ピンフドラ1　": "平和、ドラ1",
  "ダブ東　オール": "ダブ東",
  "　": "",
  ピンフ一盃口: "平和、一盃口",
  "ドラ2　オール": "ドラ2",
  "トイトイ　": "対々和",
  裏ドラ5: "裏5",
  "赤1　　1": "赤1",
  "トイトイ　オール": "対々和",
  ピンフ赤1: "平和、赤1",
  リーチツモ: "立直、自摸",
  "海底　": "海底撈月",
  リーチ赤1: "立直、赤1",
  リーチ一発: "立直、一発",
  ダブ東ドラ1: "ダブ東、ドラ1",
  ツモドラ1: "自摸、ドラ1",
  "ツモドラ1　オール": "自摸、ドラ1",
  ピンフドラ2: "平和、ドラ2",
  一気通貫ドラ1: "一気通貫、ドラ2",
  七対子ドラ2: "七対子、ドラ2",
  "三色　オール": "三色同順",
  タンヤオドラ3: "タンヤオ、ドラ3",
  "ドラ1　　": "ドラ1",
  "タンヤオドラ2":"タンヤオ、ドラ2",
  "一気通貫　":"一気通貫",
  "チャンタ　オール": "全帯么"
};
var noResist = [];
db.getCollection("stats")
  .find({ 役: { $ne: "" } })
  .forEach((d) => {
    var yaku = "";
    d["役"].split("、").forEach((y) => {
      if (yakuMap.hasOwnProperty(y)) {
        if (yakuMap[y]) yaku += `${yakuMap[y]}、`;
      } else yaku += `${y}、`;
    });
    d["役"] = yaku.substring(0, yaku.lastIndexOf("、"));
    db.getCollection("stats").save(d);
  });
